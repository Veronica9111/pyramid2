<!DOCTYPE html>
<html lang="en">
<head>
    <script src="/static/js/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="/static/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/static/js/semantic.min.js"></script>
    <link rel="stylesheet" type="text/css" class="ui" href="/static/css/semantic.css">
    <link rel="stylesheet" type="text/css" href="/static/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="/static/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/jquery-ui.min.css">
    <script type="text/javascript" src="/static/js/select2.full.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/select2.min.css">

    <style>
    #user-table-div{
        margin-top: 5em;
        width: 70%;
        margin-left: 20%;
    }

    #tabs{
        margin-top: 6em;
        margin-left: 15%;
        margin-right: 5%;
    }

    #correct{
        color: green;
    }
    </style>
</head>
<body>
    <div class="jumbotron">
        <h1 id='question'></h1>
        <input id='answer' class='form-control'/>
        <h2 id='correct'></h2>
    </div>
    <script>
        count = 0;
        result = {};
        var id = window.location.pathname.split("/")[2];
        $.post('/set', {'id': id, 'method': 'GET'}, function(data){
            var data = $.parseJSON(data);
            items = data.data['items'];
            length = items.length;
            if(length > 0){
                $("#question").html(items[0]['question']);
                answer = items[0]['answer'];
                count = 1;
            }
                
            
        });
        $('#answer').on('keypress', function(event){
            if(event.keyCode == 13){
                if($('#answer').val() == answer){
                    console.log('correct');
                    if(!(count in result)){
                        result[count] = 0;
                    }
                    $("#correct").html("");
                    if(count <length){
                        $("#question").html(items[count]['question']);
                        $("#answer").val("");
                        answer = items[count]['answer'];
                        count++;
                    }else{
                        console.log(result);
                        //alert("Correct rate is: " + (correctCount * 100 /length) + "%");
                    }

                }else{
                    if(!(count in result)){
                        result[count] = 1;
                    }else{
                        result[count] += 1;
                    }
                    console.log('wrong');
                    $("#correct").html(answer).show("slow").hide("slow");
                    $("#answer").val("");
                }
            }
        });
    </script>
</body>
</html>
